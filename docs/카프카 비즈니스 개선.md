# 카프카 활용 비즈니스 개선

## 개요

- 현재 프로젝트의 대용량 트래픽 서비스인 쿠폰 발급 비즈니스를 카프카를 활용하여 개선

## 문제

- 현재 선착순 쿠폰 발급 서비스는 대용량 트래픽에 대비하여 DB에 접근하여 발급 하는 것이 아닌 Redis를 사용하여 발급을 처리하고 있음.  Redis를 사용함에 따라 처리속도 향상, DB 부하 감소, 중복 발급, 순서 보장 등의 효과를 보았으나, 유저가 쿠폰을 사용하기 전까지 DB에 저장되지 않고 Redis에만 데이터가 남아있는 상황 발생.

## 개선 방안

- 사용자가 쿠폰을 발급했을 때 비동기로 카프카 이벤트를 발행하여 DB에 쿠폰 발급 데이터 저장
- 다수의 사용자는 Redis에서 컨트롤하고,  DB에는 최대 쿠폰 수량 만큼의 사용자가 접근하기 때문에 DB 부하는 적은 상태로 즉시 발급 데이터를 저장 할 수 있음
- 이벤트를 활용하여 비동기로 저장하기 때문에 사용자는 DB 저장 시점까지 기다릴 필요 없이 Redis에서 발급 성공 직후 바로 발급 결과 확인 가능

## 개선 프로세스
![image](https://github.com/user-attachments/assets/8c26cd79-9913-4f76-b605-b5d6dae3fcf9)
