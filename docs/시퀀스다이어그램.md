sequenceDiagram
	actor 유저
	participant 주문
	participant 유저 도메인 as 유저
	participant 상품
	participant 쿠폰
	participant 결제
    
	
	유저 ->>+ 주문: 주문 요청
	주문 ->>+ 유저 도메인: 잔액 확인 요청
	alt 잔액 부족
	    유저 도메인 -->> 주문: 잔액 부족
	    주문 -->> 유저: 주문 실패
	end
	유저 도메인 -->>- 주문: 잔액 충분
	
	주문 ->>+ 상품: 재고 확인 요청
	alt 재고 부족
	    상품 -->> 주문: 재고 부족
	    주문 -->> 유저: 주문 실패
	end
	상품 -->>- 주문: 재고 충분
	
	주문 ->>+ 쿠폰: 쿠폰 사용 요청
	alt 사용 불가 쿠폰
	    쿠폰 -->> 주문: 쿠폰 사용 불가
	end
	쿠폰 -->>- 주문: 쿠폰 사용
	주문 ->> 주문: 쿠폰 사용 금액 차감
	
	주문 ->>+ 결제: 결제 요청
	
	결제 ->>+ 유저 도메인: 잔액 차감 요청
	유저 도메인 ->> 유저 도메인: 잔액 차감
	유저 도메인 -->>- 결제: 잔액 차감 완료
	
	결제 ->>+ 상품: 재고 차감 요청
	상품 ->> 상품: 재고 차감
	상품 -->>- 결제: 재고 차감 완료
	
	결제 -->>- 주문: 결제 완료
	주문 -->>- 유저: 주문 완료
